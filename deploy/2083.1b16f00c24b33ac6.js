"use strict";(self.webpackChunkJbNotifier=self.webpackChunkJbNotifier||[]).push([[2083],{2083:(G,h,a)=>{a.r(h),a.d(h,{DashboardModule:()=>S});var g=a(32427),l=a(40381),u=a(65765),m=a(17340),D=a(31610),f=a(23758),t=a(19212),c=a(88762),r=a(60095),b=a(11411),v=a(86123);const T=["errorRateWidget"],C=["averageExecutionDurationWidget"],Z=["editionsUsageWidget"],A=["latestTenantsWidget"];function x(e,d){1&e&&(t.TgZ(0,"div",12),t._UZ(1,"abp-error-rate-widget",13,14),t.qZA()),2&e&&(t.xp6(),t.Q6J("height",250))}function J(e,d){1&e&&(t.TgZ(0,"div",12),t._UZ(1,"abp-average-execution-duration-widget",13,15),t.qZA()),2&e&&(t.xp6(),t.Q6J("height",250))}function W(e,d){1&e&&(t.TgZ(0,"div",12),t._UZ(1,"abp-editions-usage-widget",13,16),t.qZA()),2&e&&(t.xp6(),t.Q6J("height",250))}function y(e,d){1&e&&(t.TgZ(0,"div",12),t._UZ(1,"abp-latest-tenants-widget",17,18),t.qZA()),2&e&&(t.xp6(),t.Q6J("minHeight",250))}const p=new Date,L=new Date(p.getFullYear(),p.getMonth()-1,p.getDate());let H=(()=>{class e{constructor(){this.fb=(0,t.f3M)(r.qu),this.toDate=p,this.fromDate=L,this.formFilters=this.fb.group({times:[{fromDate:this.fromDate,toDate:this.toDate}]})}ngAfterViewInit(){this.refresh()}refresh(){const{fromDate:i,toDate:o}={...this.formFilters.value.times},n=this.convertToString(i),s=this.convertToString(o);this.errorRateWidget?.draw({startDate:n,endDate:s}),this.averageExecutionDurationWidget?.draw({startDate:n,endDate:s}),this.editionsUsageWidget?.draw(),this.latestTenantsWidget?.draw()}convertToString(i){return i.toLocalISOString()}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-host-dashboard"]],viewQuery:function(o,n){if(1&o&&(t.Gf(T,5),t.Gf(C,5),t.Gf(Z,5),t.Gf(A,5)),2&o){let s;t.iGM(s=t.CRH())&&(n.errorRateWidget=s.first),t.iGM(s=t.CRH())&&(n.averageExecutionDurationWidget=s.first),t.iGM(s=t.CRH())&&(n.editionsUsageWidget=s.first),t.iGM(s=t.CRH())&&(n.latestTenantsWidget=s.first)}},features:[t._Bn([{provide:g.DO,useClass:g.s5}])],decls:20,vars:14,consts:[[3,"title"],[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],["id","datepicker",1,"input-daterange","row","align-items-center","justify-content-center"],[1,"col-12","col-lg-auto","col-md-6","mb-3","mb-lg-0"],["formControlName","times","id","times","startDateProp","fromDate","endDateProp","toDate",3,"labelText"],[1,"col-12","col-lg-2","col-md-12"],["type","submit",1,"btn","btn-primary","btn-block"],["id","DashboardWidgetsArea"],[1,"row"],["class","col col-md-12 col-lg-6",4,"abpPermission"],[1,"col","col-md-12","col-lg-6"],[3,"height"],["errorRateWidget",""],["averageExecutionDurationWidget",""],["editionsUsageWidget",""],[3,"minHeight"],["latestTenantsWidget",""]],template:function(o,n){1&o&&(t.TgZ(0,"abp-page",0),t.ALo(1,"abpLocalization"),t.TgZ(2,"div",1)(3,"div",2)(4,"form",3),t.NdJ("ngSubmit",function(){return n.refresh()}),t.TgZ(5,"div",4)(6,"div",5),t._UZ(7,"abp-date-range-picker",6),t.ALo(8,"abpLocalization"),t.qZA(),t.TgZ(9,"div",7)(10,"button",8)(11,"span"),t._uU(12),t.ALo(13,"abpLocalization"),t.qZA()()()()()()(),t.TgZ(14,"div",9)(15,"div",10),t.YNc(16,x,3,1,"div",11)(17,J,3,1,"div",11)(18,W,3,1,"div",11)(19,y,3,1,"div",11),t.qZA()()()),2&o&&(t.Q6J("title",t.lcZ(1,8,"::Menu:Dashboard")),t.xp6(4),t.Q6J("formGroup",n.formFilters),t.xp6(3),t.Q6J("labelText",t.lcZ(8,10,"::Date")),t.xp6(5),t.Oqu(t.lcZ(13,12,"AbpAuditLogging::Refresh")),t.xp6(4),t.Q6J("abpPermission","AuditLogging.AuditLogs"),t.xp6(),t.Q6J("abpPermission","AuditLogging.AuditLogs"),t.xp6(),t.Q6J("abpPermission","Saas.Tenants"),t.xp6(),t.Q6J("abpPermission","Saas.Tenants"))},dependencies:[r._Y,r.JJ,r.JL,r.sg,r.u,c.YzZ,c.l97,b.hL,b.J5,v.C_,l.ErrorRateWidgetComponent,l.AverageExecutionDurationWidgetComponent,m.EditionsUsageWidgetComponent,m.LatestTenantsWidgetComponent,u.II,c.fuE]})}return e})(),Q=(()=>{class e{ngOnDestroy(){}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-tenant-dashboard"]],decls:5,vars:0,consts:[[1,"row","entry-row"],[1,"col"],[1,"card"],[1,"card-body"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4," Add your Tenant related charts/widgets to this page ! "),t.qZA()()()())}})}return e})();function U(e,d){1&e&&t._UZ(0,"app-host-dashboard")}function _(e,d){1&e&&t._UZ(0,"app-tenant-dashboard")}const M=[{path:"",component:(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-dashboard"]],decls:2,vars:2,consts:[[4,"abpPermission"]],template:function(o,n){1&o&&t.YNc(0,U,1,0,"app-host-dashboard",0)(1,_,1,0,"app-tenant-dashboard",0),2&o&&(t.Q6J("abpPermission","JbNotifier.Dashboard.Host"),t.xp6(),t.Q6J("abpPermission","JbNotifier.Dashboard.Tenant"))},dependencies:[c.l97,H,Q],encapsulation:2})}return e})()}];let w=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(M),f.Bz]})}return e})(),S=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[D.m,w,g.M,l.AuditLoggingModule,m.SaasModule,u.BG,v.C8,r.UX]})}return e})()}}]);