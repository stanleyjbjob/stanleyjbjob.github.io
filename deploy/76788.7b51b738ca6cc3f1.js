"use strict";(self.webpackChunkJbNotifier=self.webpackChunkJbNotifier||[]).push([[76788],{5138:(q,m,o)=>{o.r(m),o.d(m,{CronExpressionsModule:()=>w});var b=o(96814),d=o(23758);const C=[{type:"buttons",fixed:!0,caption:"\u64cd\u4f5c",buttons:[{name:"job-list",template:"job-list"}]},{dataField:"id",caption:"Cron\u8868\u793a\u5f0f",visible:!1},{dataField:"notificationSchedulePlanId ",visible:!1},{dataField:"cronExpression",caption:"Cron\u8868\u793a\u5f0f",dataType:"string"},{dataField:"description",caption:"Cron\u63cf\u8ff0",dataType:"string"},{dataField:"notificationCount",caption:"\u901a\u77e5\u6578\u91cf",dataType:"number",alignment:"left"}],u={index:"/api/app/jbnotifier-admin/cron-expressions",get:"/api/app/jbnotifier-admin/cron-expressions",create:"/api/app/jbnotifier-admin/cron-expressions",update:"/api/app/jbnotifier-admin/cron-expressions",delete:"/api/app/jbnotifier-admin/cron-expressions"},h=[{dataField:"tenantId",path:"/api/identity/customize-users/assignable-tenants",pathForSelectedDisplay:"/api/saas/customize-tenants"}],y=[{name:"tenantName",translateKeys:["Saas::DisplayName:TenantName"]},{dataField:"startDate",translateKeys:["AbpAuditLogging::StartDate"]},{dataField:"endDate",translateKeys:["AbpAuditLogging::EndDate"]},{name:"status",translateKeys:["AbpAccount::Status"]}],x=[{dataField:"id",mapping:["cronExpression","id"]},{dataField:"id",mapping:["cronExpression","id"]},{dataField:"cronExpression",queryStringKey:"CronExpression",mapping:["cronExpression","id"]},{dataField:"description",queryStringKey:"Description",mapping:["cronExpression","description"]},{dataField:"notificationCount",queryStringKey:"NotificationCount",mapping:["notificationCount"]},{dataField:"concurrencyStamp",mapping:["apiKey","concurrencyStamp"]}],g=[{dataField:"id",editorType:"dxTextBox",validationRules:[{type:"pattern",pattern:/^(\*|([0-9]|1[0-9]|2[0-3]))(\/\d+)?(\s+(\*|([0-9]|[1-5][0-9]))(\/\d+)?){4}$/,message:"\u683c\u5f0f\u4e0d\u6b63\u78ba!"},o(85054).L]},{dataField:"description",editorType:"dxTextBox",cssClass:"cron-description",editorOptions:{disabled:!0}}],F={popup:{title:"::\u65b0\u589eCron\u8868\u793a\u5f0f",wrapperAttr:{class:"basic-popup"},width:500,toolbarItems:[{toolbar:"bottom",template:"bottom-toolbar"}]},form:{colCount:1,items:g,elementAttr:{class:"custom-form custom-form--edit"}}},S={popup:{title:"::\u65b0\u589eCron\u8868\u793a\u5f0f",wrapperAttr:{class:"basic-popup"},width:500,toolbarItems:[{toolbar:"bottom",template:"bottom-toolbar"}]},form:{colCount:1,items:g,elementAttr:{class:"custom-form custom-form--edit"}}};var A=o(10708),t=o(19212),E=o(67),T=o(72783),M=o(53009),K=o(59444),D=o(16358),j=o(20843),f=o(2173),J=o(25012),P=o(67846),Z=o(39150),L=o(65343),Q=o(27310),U=o(92931),N=o(60237),B=o(21194);const R=["grid"];function V(e,p){if(1&e){const n=t.EpF();t.TgZ(0,"dx-button",9),t.NdJ("onClick",function(){t.CHM(n),t.oxw();const a=t.MAs(2);return t.KtG(a.instance.addRow())}),t.qZA()}}function G(e,p){if(1&e&&t._UZ(0,"app-grid-after-tool-bar",10),2&e){t.oxw();const n=t.MAs(2);t.Q6J("grid",n)}}function I(e,p){if(1&e&&t._UZ(0,"app-bottom-toolbar-btns",10),2&e){t.oxw();const n=t.MAs(2);t.Q6J("grid",n)}}const Y=()=>({class:"custom-button custom-button--blue job-list"});function z(e,p){if(1&e){const n=t.EpF();t.TgZ(0,"dx-button",11),t.NdJ("onClick",function(){const s=t.CHM(n).$implicit,c=t.oxw();return t.KtG(c.showJobList(s.data.cronExpression,s.data.description))}),t.qZA()}2&e&&t.Q6J("elementAttr",t.DdM(1,Y))}const O=[{path:"",component:(()=>{class e{constructor(n,i,a,s,c){this.gridDataSourceService=n,this.templateStore=i,this.appRestService=a,this.tenantChooserService=s,this.router=c,this.columns=C,this.cRUDEndpoints=u,this.dataFieldLookupSourceMapping=h,this.dataFieldTranslationKeysMapping=y,this.relatedDataValueAndQueryStringKeyMapping=x,this.editingPropertiesForCreating=F,this.editingPropertiesForUpdating=S,this.gridProperties={repaintChangesOnly:!0,editing:{allowAdding:!1}},this.jobListVisible=!1,this.showJobList=r=>{this.jobListVisible=!0,this.cronExpression=r,this.router.navigate(["./cron-expressions",r])},this.columns[1].setCellValue=(r,l,tt)=>{if(/^(\*|([0-9]|1[0-9]|2[0-3]))(\/\d+)?(\s+(\*|([0-9]|[1-5][0-9]))(\/\d+)?){4}$/.test(l))return(0,A.n)(this.appRestService.request({method:"GET",url:`/api/app/jbnotifier-admin/cron-expressions/description/${l}`})).then(k=>{r.id=l,r.description=k.description})},this.gridDataSource=this.gridDataSourceService.getDataSource(u,x),this.tenantChooserService.tenantId$.subscribe(r=>{this.grid?.instance.refresh()})}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(E.I),t.Y36(T.z),t.Y36(M.$),t.Y36(K.L),t.Y36(d.F0))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-cron-expressions"]],viewQuery:function(i,a){if(1&i&&t.Gf(R,5),2&i){let s;t.iGM(s=t.CRH())&&(a.grid=s.first)}},decls:11,vars:9,consts:[["appGridFeature","","appGridFeatureNotification","",3,"dataFieldTranslationKeysMapping","datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","editingPropertiesForCreating","editingPropertiesForUpdating","columns","dataSource"],["grid",""],["location","before"],["appGridAddButton","",3,"onClick",4,"dxTemplate"],["location","after"],[3,"grid",4,"dxTemplate"],["name","applyFilterButton","cssClass","d-none"],[3,"grid",4,"dxTemplate","dxTemplateOf"],["appCustomButton","","text","\u901a\u77e5\u6e05\u55ae",3,"elementAttr","onClick",4,"dxTemplate","dxTemplateOf"],["appGridAddButton","",3,"onClick"],[3,"grid"],["appCustomButton","","text","\u901a\u77e5\u6e05\u55ae",3,"elementAttr","onClick"]],template:function(i,a){1&i&&(t._UZ(0,"app-tenant-chooser"),t.TgZ(1,"dx-data-grid",0,1)(3,"dxo-toolbar")(4,"dxi-item",2),t.YNc(5,V,1,0,"dx-button",3),t.qZA(),t.TgZ(6,"dxi-item",4),t.YNc(7,G,1,1,"app-grid-after-tool-bar",5),t.qZA(),t._UZ(8,"dxi-item",6),t.qZA(),t.YNc(9,I,1,1,"app-bottom-toolbar-btns",7)(10,z,1,2,"dx-button",8),t.qZA()),2&i&&(t.xp6(),t.Q6J("dataFieldTranslationKeysMapping",a.dataFieldTranslationKeysMapping)("datafieldValueQueryStringKeyMapping",a.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",a.dataFieldLookupSourceMapping)("editingPropertiesForCreating",a.editingPropertiesForCreating)("editingPropertiesForUpdating",a.editingPropertiesForUpdating)("columns",a.columns)("dataSource",a.gridDataSource),t.xp6(8),t.Q6J("dxTemplateOf","bottom-toolbar"),t.xp6(),t.Q6J("dxTemplateOf","job-list"))},dependencies:[D.K,j.p6,f.ZT3,J.e,f.y1f,P.S,Z._,L.f,Q.A,U.R,N.V,B.D],styles:[".job-list[_ngcontent-%COMP%]{padding:10px 8px;border-radius:6px}  .custom-form.custom-form--edit .dx-item.dx-box-item .cron-description{padding:4px 8px}  .custom-form.custom-form--edit .dx-item.dx-box-item .cron-description .dx-field-item-label-text{color:var(--gray-1)}  .custom-form.custom-form--edit .dx-item.dx-box-item .cron-description .dx-state-disabled.dx-widget{opacity:1}  .custom-form.custom-form--edit .dx-item.dx-box-item .cron-description .dx-state-disabled.dx-widget .dx-texteditor-container{border:0}  .custom-form.custom-form--edit .dx-item.dx-box-item .cron-description .dx-state-disabled.dx-widget .dx-texteditor-container .dx-texteditor-input-container{padding:0}  .custom-form.custom-form--edit .dx-item.dx-box-item .cron-description .dx-state-disabled.dx-widget .dx-texteditor-container .dx-texteditor-input-container .dx-texteditor-input{color:var(--yellow-1);font-size:14px}"]})}return e})()},{path:":cronExpression",loadChildren:()=>Promise.all([o.e(68592),o.e(45452)]).then(o.bind(o,45452)).then(e=>e.CronExpressionsJobListModule)}];let $=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#o=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(O),d.Bz]})}return e})();var H=o(5533),X=o(31610),W=o(41992);let w=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#o=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[b.ez,H.P,$,X.m,W.e]})}return e})()}}]);