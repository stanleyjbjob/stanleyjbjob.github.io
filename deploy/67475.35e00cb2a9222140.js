"use strict";(self.webpackChunkJbNotifier=self.webpackChunkJbNotifier||[]).push([[67475],{67475:(H,y,l)=>{l.r(y),l.d(y,{AbstractTemplateContentComponent:()=>b,DEFAULT_TEXT_TEMPLATES_ENTITY_ACTIONS:()=>D,DEFAULT_TEXT_TEMPLATES_ENTITY_PROPS:()=>U,DEFAULT_TEXT_TEMPLATES_TOOLBAR_ACTIONS:()=>J,DEFAULT_TEXT_TEMPLATE_MANAGEMENT_ENTITY_ACTIONS:()=>N,DEFAULT_TEXT_TEMPLATE_MANAGEMENT_ENTITY_PROPS:()=>_,DEFAULT_TEXT_TEMPLATE_MANAGEMENT_TOOLBAR_ACTIONS:()=>E,InlineTemplateContentComponent:()=>I,TEXT_TEMPLATE_MANAGEMENT_ENTITY_ACTION_CONTRIBUTORS:()=>f,TEXT_TEMPLATE_MANAGEMENT_ENTITY_PROP_CONTRIBUTORS:()=>h,TEXT_TEMPLATE_MANAGEMENT_TOOLBAR_ACTION_CONTRIBUTORS:()=>C,TemplateContentsComponent:()=>S,TextTemplateManagementExtensionsGuard:()=>k,TextTemplateManagementGuard:()=>V,TextTemplateManagementModule:()=>W,TextTemplatesComponent:()=>A,textTemplateManagementExtensionsResolver:()=>z,textTemplateManagementGuard:()=>P});var L=l(69670),e=l(19212),s=l(60095),c=l(23758),i=l(88762);let R=(()=>{class t{constructor(n){this.restService=n,this.apiName="TextTemplateManagement",this.get=a=>this.restService.request({method:"GET",url:"/api/text-template-management/template-contents",params:{templateName:a.templateName,cultureName:a.cultureName}},{apiName:this.apiName}),this.restoreToDefault=a=>this.restService.request({method:"PUT",url:"/api/text-template-management/template-contents/restore-to-default",body:a},{apiName:this.apiName}),this.update=a=>this.restService.request({method:"PUT",url:"/api/text-template-management/template-contents",body:a},{apiName:this.apiName})}static#e=this.\u0275fac=function(a){return new(a||t)(e.LFG(i.vgb))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),F=(()=>{class t{constructor(n){this.restService=n,this.apiName="TextTemplateManagement",this.get=a=>this.restService.request({method:"GET",url:`/api/text-template-management/template-definitions/${a}`},{apiName:this.apiName}),this.getList=a=>this.restService.request({method:"GET",url:"/api/text-template-management/template-definitions",params:{filterText:a.filterText,sorting:a.sorting,skipCount:a.skipCount,maxResultCount:a.maxResultCount}},{apiName:this.apiName})}static#e=this.\u0275fac=function(a){return new(a||t)(e.LFG(i.vgb))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var M=l(99397),Z=l(64716),X=l(94664),d=l(37398),G=l(21441),u=l(11411),g=l(65765),Y=l(96814),r=l(17557),v=l(86123),q=l(22096),O=l(4505),Q=l(32427);function B(t,p){if(1&t&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&t){const n=p.$implicit;e.Q6J("ngValue",n.cultureName),e.xp6(),e.hij(" ",n.displayName," ")}}function j(t,p){if(1&t&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&t){const n=p.$implicit;e.Q6J("ngValue",n.cultureName),e.xp6(),e.hij(" ",n.displayName," ")}}let b=(()=>{class t{constructor(n){this.injector=n,this.templateContent={},this.fb=n.get(s.QS),this.templateContentService=n.get(R),this.route=n.get(c.gz),this.toaster=n.get(L.MJ)}ngOnInit(){this.form=this.fb.group({content:["",[s.Validators.required]]}),this.getData().subscribe()}getData(){return this.templateContentService.get({templateName:this.route.snapshot.params.name,cultureName:this.selectedCultureName}).pipe((0,M.b)(a=>{this.templateContent=a,this.form.get("content").setValue(this.templateContent.content)}))}save(n){if(this.form.invalid)return;this.busy=!0;const{content:a}=this.form.value;this.templateContentService.update({templateName:this.templateContent.name,cultureName:this.selectedCultureName,content:a}).pipe((0,Z.x)(()=>this.busy=!1)).subscribe(()=>{this.toaster.success("TextTemplateManagement::Success"),n&&n()})}restoreToDefault(){this.busy=!0,this.templateContentService.restoreToDefault({templateName:this.templateContent.name,cultureName:this.selectedCultureName}).pipe((0,X.w)(()=>this.getData()),(0,Z.x)(()=>this.busy=!1)).subscribe(()=>{this.toaster.success("TextTemplateManagement::Success")})}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(e.zs3))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(a,o){},encapsulation:2})}return t})(),I=(()=>{class t extends b{constructor(n,a){super(n),this.injector=n,this.router=a}customizePerCulture(){this.router.navigateByUrl(`/text-template-management/text-templates/contents/${this.templateContent.name}`)}save(){super.save(()=>{this.router.navigateByUrl("/text-template-management/text-templates")})}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(e.zs3),e.Y36(c.F0))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["abp-inline-template-content"]],features:[e.qOj],decls:43,vars:30,consts:[[3,"title"],["role","alert",1,"alert","alert-danger",3,"innerHTML"],[1,"card"],[1,"card-header"],[1,"form-label"],[1,"card-body"],["id","template-inline-content-form",3,"formGroup"],[1,"row"],[1,"col"],[1,"mb-3"],["for","TemplateContent",1,"form-label"],["id","TemplateContent","name","TemplateContent","rows","10","formControlName","content",1,"form-control",3,"disabled"],[1,"d-flex","flex-column","gap-2","flex-column","flex-md-row","justify-content-between"],["routerLink","/text-template-management/text-templates","role","button",1,"btn","btn-primary"],["aria-hidden","true",1,"fa","fa-arrow-left","me-1"],[1,"d-flex","gap-2","flex-column","flex-md-row"],["id","save-content","type","button",1,"btn","btn-primary",3,"disabled","click"],["id","restore-to-default","type","button",1,"btn","btn-danger",3,"disabled","click"],["id","edit-unique-localization","type","button",1,"btn","btn-link",3,"disabled","click"]],template:function(a,o){1&a&&(e.TgZ(0,"abp-page",0),e.ALo(1,"abpLocalization"),e._UZ(2,"div",1),e.ALo(3,"abpLocalization"),e.TgZ(4,"div",2)(5,"div",3)(6,"label",4),e._uU(7),e.ALo(8,"abpLocalization"),e.TgZ(9,"strong"),e._uU(10),e.qZA()()(),e.TgZ(11,"div",5)(12,"form",6)(13,"div",7)(14,"div",8)(15,"div",9)(16,"label",10),e._uU(17),e.ALo(18,"abpLocalization"),e.qZA(),e.TgZ(19,"span"),e._uU(20," * "),e.qZA(),e.TgZ(21,"textarea",11),e._uU(22,"              "),e.qZA()()()(),e.TgZ(23,"div",7)(24,"div",12)(25,"a",13),e._UZ(26,"i",14),e.TgZ(27,"span"),e._uU(28),e.ALo(29,"abpLocalization"),e.qZA()(),e.TgZ(30,"div",15)(31,"button",16),e.NdJ("click",function(){return o.save()}),e.TgZ(32,"span"),e._uU(33),e.ALo(34,"abpLocalization"),e.qZA()(),e.TgZ(35,"button",17),e.NdJ("click",function(){return o.restoreToDefault()}),e.TgZ(36,"span"),e._uU(37),e.ALo(38,"abpLocalization"),e.qZA()(),e.TgZ(39,"button",18),e.NdJ("click",function(){return o.customizePerCulture()}),e.TgZ(40,"span"),e._uU(41),e.ALo(42,"abpLocalization"),e.qZA()()()()()()()()()),2&a&&(e.Q6J("title",e.lcZ(1,14,"TextTemplateManagement::Contents")),e.xp6(2),e.Q6J("innerHTML",e.lcZ(3,16,"TextTemplateManagement::InlineContentDescription"),e.oJD),e.xp6(5),e.hij("",e.lcZ(8,18,"TextTemplateManagement::Name"),": "),e.xp6(3),e.Oqu(o.templateContent.name),e.xp6(2),e.Q6J("formGroup",o.form),e.xp6(5),e.Oqu(e.lcZ(18,20,"TextTemplateManagement::TemplateContent")),e.xp6(4),e.Q6J("disabled",o.busy),e.xp6(7),e.Oqu(e.lcZ(29,22,"TextTemplateManagement::ReturnToTemplates")),e.xp6(3),e.Q6J("disabled",o.busy),e.xp6(2),e.Oqu(e.lcZ(34,24,"TextTemplateManagement::SaveContent")),e.xp6(2),e.Q6J("disabled",o.busy),e.xp6(2),e.Oqu(e.lcZ(38,26,"TextTemplateManagement::RestoreToDefault")),e.xp6(2),e.Q6J("disabled",o.busy),e.xp6(2),e.Oqu(e.lcZ(42,28,"TextTemplateManagement::CustomizePerCulture")))},dependencies:[c.rH,u.hL,u.J5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,g.II,i.fuE],encapsulation:2})}return t})(),S=(()=>{class t extends b{constructor(n,a){super(n),this.injector=n,this.configStateService=a,this.languages=[],this.referenceTemplateContent={content:""}}ngOnInit(){this.languages=this.configStateService.getDeep("localization.languages"),this.selectedCultureName=this.languages[0].cultureName,this.referenceTemplateContent.cultureName=this.configStateService.getDeep("localization.currentCulture.cultureName"),super.ngOnInit(),this.getReferenceTemplateContent()}getReferenceTemplateContent(){this.templateContentService.get({templateName:this.route.snapshot.params.name,cultureName:this.referenceTemplateContent.cultureName}).subscribe(n=>{this.referenceTemplateContent=n})}onChangeSelectedCultureName(){this.getData().subscribe()}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(e.zs3),e.Y36(i.XJE))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["abp-template-contents"]],features:[e.qOj],decls:61,vars:37,consts:[[3,"title"],[1,"card"],[1,"card-header"],[1,"form-label"],[1,"card-body"],[1,"row"],[1,"col-md-6"],[1,"mb-3"],["for","target-culture-name",1,"form-label"],["id","target-culture-name","name","target-culture-name",1,"culture-selector","form-select","form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col"],["for","reference-content",1,"form-label"],["id","reference-content","name","reference-content","rows","10","readonly","",1,"form-control",3,"value"],["id","template-inline-content-form",3,"formGroup"],["for","TemplateContent",1,"form-label"],["id","TemplateContent","name","TemplateContent","rows","10","formControlName","content",1,"form-control",3,"disabled"],[1,"col","col-md-4"],["routerLink","/text-template-management/text-templates","role","button",1,"btn","btn-primary"],["aria-hidden","true",1,"fa","fa-arrow-left","me-1"],[1,"col","col-md-8"],[1,"float-end"],["id","save-content","type","button",1,"btn","btn-primary",3,"disabled","click"],["id","restore-to-default","type","button",1,"btn","btn-danger","ms-1",3,"disabled","click"],[3,"ngValue"]],template:function(a,o){1&a&&(e.TgZ(0,"abp-page",0),e.ALo(1,"abpLocalization"),e.TgZ(2,"div",1)(3,"div",2)(4,"label",3),e._uU(5),e.ALo(6,"abpLocalization"),e.TgZ(7,"strong"),e._uU(8),e.qZA()()(),e.TgZ(9,"div",4)(10,"div",5)(11,"div",6)(12,"div",7)(13,"label",8),e._uU(14),e.ALo(15,"abpLocalization"),e.qZA(),e.TgZ(16,"select",9),e.NdJ("ngModelChange",function(T){return o.referenceTemplateContent.cultureName=T})("ngModelChange",function(){return o.getReferenceTemplateContent()}),e.YNc(17,B,2,2,"option",10),e.qZA()(),e.TgZ(18,"div",5)(19,"div",11)(20,"div",7)(21,"label",12),e._uU(22),e.ALo(23,"abpLocalization"),e.qZA(),e.TgZ(24,"textarea",13),e._uU(25,"                "),e.qZA()()()()(),e.TgZ(26,"div",6)(27,"div",7)(28,"label",8),e._uU(29),e.ALo(30,"abpLocalization"),e.qZA(),e.TgZ(31,"select",9),e.NdJ("ngModelChange",function(T){return o.selectedCultureName=T})("ngModelChange",function(){return o.onChangeSelectedCultureName()}),e.YNc(32,j,2,2,"option",10),e.qZA()(),e.TgZ(33,"form",14)(34,"div",5)(35,"div",11)(36,"div",7)(37,"label",15),e._uU(38),e.ALo(39,"abpLocalization"),e.qZA(),e.TgZ(40,"span"),e._uU(41," * "),e.qZA(),e.TgZ(42,"textarea",16),e._uU(43,"                  "),e.qZA()()()()()()(),e.TgZ(44,"div",5)(45,"div",17)(46,"a",18),e._UZ(47,"i",19),e.TgZ(48,"span"),e._uU(49),e.ALo(50,"abpLocalization"),e.qZA()()(),e.TgZ(51,"div",20)(52,"div",21)(53,"button",22),e.NdJ("click",function(){return o.save()}),e.TgZ(54,"span"),e._uU(55),e.ALo(56,"abpLocalization"),e.qZA()(),e.TgZ(57,"button",23),e.NdJ("click",function(){return o.restoreToDefault()}),e.TgZ(58,"span"),e._uU(59),e.ALo(60,"abpLocalization"),e.qZA()()()()()()()()),2&a&&(e.Q6J("title",e.lcZ(1,19,"TextTemplateManagement::Contents")),e.xp6(5),e.hij("",e.lcZ(6,21,"TextTemplateManagement::Name"),": "),e.xp6(3),e.Oqu(o.templateContent.name),e.xp6(6),e.Oqu(e.lcZ(15,23,"TextTemplateManagement::BaseCultureName")),e.xp6(2),e.Q6J("ngModel",o.referenceTemplateContent.cultureName),e.xp6(),e.Q6J("ngForOf",o.languages),e.xp6(5),e.Oqu(e.lcZ(23,25,"TextTemplateManagement::BaseContent")),e.xp6(2),e.Q6J("value",o.referenceTemplateContent.content),e.xp6(5),e.Oqu(e.lcZ(30,27,"TextTemplateManagement::TargetCultureName")),e.xp6(2),e.Q6J("ngModel",o.selectedCultureName),e.xp6(),e.Q6J("ngForOf",o.languages),e.xp6(),e.Q6J("formGroup",o.form),e.xp6(5),e.Oqu(e.lcZ(39,29,"TextTemplateManagement::TemplateContent")),e.xp6(4),e.Q6J("disabled",o.busy),e.xp6(7),e.Oqu(e.lcZ(50,31,"TextTemplateManagement::ReturnToTemplates")),e.xp6(4),e.Q6J("disabled",o.busy),e.xp6(2),e.Oqu(e.lcZ(56,33,"TextTemplateManagement::SaveContent")),e.xp6(2),e.Q6J("disabled",o.busy),e.xp6(2),e.Oqu(e.lcZ(60,35,"TextTemplateManagement::RestoreToDefault")))},dependencies:[c.rH,u.hL,u.J5,Y.sg,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.On,s.sg,s.u,g.II,i.fuE],encapsulation:2})}return t})(),A=(()=>{class t{constructor(n,a,o){this.list=n,this.router=a,this.service=o,this.data={items:[],totalCount:0}}ngOnInit(){this.hookToQuery()}hookToQuery(){this.list.hookToQuery(({filter:n,...a})=>this.service.getList({...a,filterText:n})).subscribe(n=>this.data=n)}editContents(n){this.router.navigate([`/text-template-management/text-templates/contents${n.isInlineLocalized?"/inline":""}/${n.name}`])}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(i.XNV),e.Y36(c.F0),e.Y36(F))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["abp-text-templates"]],features:[e._Bn([i.XNV,{provide:r.ex,useValue:"TextTemplateManagement.TextTemplates"}])],decls:6,vars:9,consts:[[3,"title","toolbar"],["id","wrapper"],["localizationSourceName","TextTemplateManagement",3,"list"],[1,"card"],[3,"actionsColumnWidth","data","recordsTotal","list"]],template:function(a,o){1&a&&(e.TgZ(0,"abp-page",0),e.ALo(1,"abpLocalization"),e.TgZ(2,"div",1),e._UZ(3,"abp-advanced-entity-filters",2),e.TgZ(4,"div",3),e._UZ(5,"abp-extensible-table",4),e.qZA()()()),2&a&&(e.Q6J("title",e.lcZ(1,7,"TextTemplateManagement::Menu:TextTemplates"))("toolbar",o.data.items),e.xp6(3),e.Q6J("list",o.list),e.xp6(2),e.Q6J("actionsColumnWidth",170)("data",o.data.items)("recordsTotal",o.data.totalCount)("list",o.list))},dependencies:[r.m5,v.hE,g.II,i.fuE],encapsulation:2})}return t})();const U=r.QC.createMany([{type:"string",name:"displayName",displayName:"TextTemplateManagement::Name",columnWidth:300},{type:"boolean",name:"isInlineLocalized",displayName:"TextTemplateManagement::IsInlineLocalized",columnWidth:150},{type:"string",name:"isLayout",displayName:"TextTemplateManagement::IsLayout",columnWidth:150,valueResolver:t=>(0,q.of)(t.record.isLayout?'<div class="text-success"><i class="fa fa-check"></i></div>':"")},{type:"string",name:"layout",displayName:"TextTemplateManagement::Layout",columnWidth:300},{type:"string",name:"defaultCultureName",displayName:"TextTemplateManagement::DefaultCultureName",columnWidth:200}]),D=r.uk.createMany([{text:"TextTemplateManagement::EditContents",action:t=>{t.getInjected(A).editContents(t.record)},permission:"TextTemplateManagement.TextTemplates.EditContents"}]),J=r.JE.createMany([]),N={"TextTemplateManagement.TextTemplates":D},E={"TextTemplateManagement.TextTemplates":J},_={"TextTemplateManagement.TextTemplates":U},f=new e.OlP("TEXT_TEMPLATE_MANAGEMENT_ENTITY_ACTION_CONTRIBUTORS"),C=new e.OlP("TEXT_TEMPLATE_MANAGEMENT_TOOLBAR_ACTION_CONTRIBUTORS"),h=new e.OlP("TEXT_TEMPLATE_MANAGEMENT_ENTITY_PROP_CONTRIBUTORS");let k=(()=>{class t{constructor(n){this.injector=n}canActivate(){const n=this.injector.get(r.X6),a=this.injector.get(f,null)||{},o=this.injector.get(C,null)||{},m=this.injector.get(h,null)||{},T=this.injector.get(i.XJE);return(0,r.ot)(T,"TextTemplateManagement").pipe((0,d.U)(x=>({"TextTemplateManagement.TextTemplates":x.TextDefinition})),(0,r.V_)(T,"TextTemplateManagement"),(0,M.b)(x=>{(0,r.Fr)(n.entityActions,N,a),(0,r.Fr)(n.toolbarActions,E,o),(0,r.Hp)(n.entityProps,_,x.prop,m)}),(0,G.h)(!0))}static#e=this.\u0275fac=function(a){return new(a||t)(e.LFG(e.zs3))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})(),V=(()=>{class t{constructor(n){this.textTemplateManagementFeatures=n}canActivate(){return this.textTemplateManagementFeatures.pipe((0,d.U)(n=>n.enable))}static#e=this.\u0275fac=function(a){return new(a||t)(e.LFG(O.zD))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();const P=()=>(0,e.f3M)(O.zD).pipe((0,d.U)(p=>p.enable)),z=()=>{const t=(0,e.f3M)(e.zs3),p=t.get(r.X6),n=t.get(f,null)||{},a=t.get(C,null)||{},o=t.get(h,null)||{},m=t.get(i.XJE);return(0,r.ot)(m,"TextTemplateManagement").pipe((0,d.U)(T=>({"TextTemplateManagement.TextTemplates":T.TextDefinition})),(0,r.V_)(m,"TextTemplateManagement"),(0,M.b)(T=>{(0,r.Fr)(p.entityActions,N,n),(0,r.Fr)(p.toolbarActions,E,a),(0,r.Hp)(p.entityProps,_,T.prop,o)}))},w=[{path:"",redirectTo:"text-templates",pathMatch:"full"},{path:"text-templates",component:i.O39,canActivate:[i.p2e,i.zaK,P],resolve:[z],children:[{path:"",component:i.c$y,data:{requiredPolicy:"TextTemplateManagement.TextTemplates",replaceableComponent:{key:"TextTemplateManagement.TextTemplates",defaultComponent:A}}},{path:"contents",component:i.O39,canActivate:[i.zaK],data:{requiredPolicy:"TextTemplateManagement.TextTemplates.EditContents"},children:[{path:"inline/:name",component:i.c$y,data:{replaceableComponent:{key:"TextTemplateManagement.InlineTemplateContent",defaultComponent:I}}},{path:":name",component:i.c$y,data:{replaceableComponent:{key:"TextTemplateManagement.TemplateContents",defaultComponent:S}}}]}]}];let $=(()=>{class t{static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({imports:[c.Bz.forChild(w),c.Bz]})}return t})(),W=(()=>{class t{static forChild(n={}){return{ngModule:t,providers:[{provide:f,useValue:n.entityActionContributors},{provide:C,useValue:n.toolbarActionContributors},{provide:h,useValue:n.entityPropContributors}]}}static forLazy(n={}){return new i.Cgl(t.forChild(n))}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({imports:[$,u.h2,i.IR2,v.vv,L.e2,Q.XC,g.BG,v.jE]})}return t})()}}]);